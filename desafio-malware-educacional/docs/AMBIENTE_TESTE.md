# ğŸ¯ Ambiente de Teste Seguro

## IntroduÃ§Ã£o

Este guia descreve como configurar um ambiente seguro e isolado para testar os scripts de malware educacional sem riscos para seu sistema principal.

## âš ï¸ Por Que Usar Ambiente Isolado?

Mesmo sendo scripts educacionais, Ã© fundamental testÃ¡-los em ambiente isolado por:

1. **SeguranÃ§a**: Previne acidentes e danos nÃ£o intencionais
2. **Realismo**: Simula um ambiente real de anÃ¡lise de malware
3. **Boas PrÃ¡ticas**: Desenvolve hÃ¡bitos profissionais de seguranÃ§a
4. **ExperimentaÃ§Ã£o**: Permite modificar e testar livremente

## ğŸ–¥ï¸ OpÃ§Ãµes de Ambiente

### OpÃ§Ã£o 1: MÃ¡quina Virtual (Recomendado)

#### VirtualBox (Gratuito)

**InstalaÃ§Ã£o:**
1. Baixe: https://www.virtualbox.org/
2. Instale o VirtualBox
3. Baixe ISO do Windows/Linux

**ConfiguraÃ§Ã£o:**
```
1. Criar nova VM
   - Nome: "MalwareTest"
   - Tipo: Windows 10/11 ou Linux
   - RAM: 4GB mÃ­nimo
   - Disco: 30GB

2. Configurar rede
   - Modo: "Host-only" ou "NAT"
   - Desabilitar "Shared Folders" inicialmente

3. Criar Snapshot antes de testar
   - VM > Snapshots > Take Snapshot
   - Nome: "Clean State"
```

**Vantagens:**
- âœ… Isolamento total
- âœ… Snapshots (restauraÃ§Ã£o instantÃ¢nea)
- âœ… Gratuito e open source
- âœ… Multiplataforma

**Desvantagens:**
- âš ï¸ Requer recursos (RAM, CPU)
- âš ï¸ InstalaÃ§Ã£o de SO necessÃ¡ria

#### VMware Workstation Player (Gratuito)

Alternativa ao VirtualBox com interface mais amigÃ¡vel.

**Download:** https://www.vmware.com/products/workstation-player.html

#### Windows Sandbox (Windows 10/11 Pro)

**AtivaÃ§Ã£o:**
```powershell
# Verificar se estÃ¡ disponÃ­vel
Get-WindowsOptionalFeature -Online -FeatureName "Containers-DisposableClientVM"

# Ativar Windows Sandbox
Enable-WindowsOptionalFeature -Online -FeatureName "Containers-DisposableClientVM" -All
```

**Uso:**
- Menu Iniciar > Windows Sandbox
- Ambiente Windows limpo toda vez
- Descartado ao fechar

**Vantagens:**
- âœ… Extremamente simples
- âœ… RÃ¡pido de iniciar
- âœ… Integrado ao Windows

**Desvantagens:**
- âš ï¸ Apenas Windows 10/11 Pro
- âš ï¸ NÃ£o salva estado

### OpÃ§Ã£o 2: Container Docker

**Dockerfile exemplo:**
```dockerfile
FROM python:3.11-slim

WORKDIR /app

# Instala dependÃªncias do sistema
RUN apt-get update && apt-get install -y \
    build-essential \
    libffi-dev \
    libssl-dev

# Copia projeto
COPY . /app

# Instala dependÃªncias Python
RUN pip install -r requirements.txt

# UsuÃ¡rio nÃ£o-root
RUN useradd -m testuser
USER testuser

CMD ["/bin/bash"]
```

**Uso:**
```bash
# Build
docker build -t malware-test .

# Run
docker run -it --rm malware-test

# Com volume (cuidado!)
docker run -it --rm -v $(pwd):/app malware-test
```

**Vantagens:**
- âœ… Leve e rÃ¡pido
- âœ… ReproduzÃ­vel
- âœ… FÃ¡cil de compartilhar

**Desvantagens:**
- âš ï¸ Menos isolamento que VM
- âš ï¸ Requer conhecimento de Docker
- âš ï¸ Linux containers no Windows precisam WSL2

### OpÃ§Ã£o 3: Computador Dedicado

Se vocÃª tem um computador antigo ou sobressalente:

**PreparaÃ§Ã£o:**
1. Backup de dados importantes
2. Formatar e instalar SO limpo
3. **Desconectar da rede principal**
4. Usar apenas para testes

**Vantagens:**
- âœ… Hardware real
- âœ… Sem overhead de virtualizaÃ§Ã£o
- âœ… Pode ficar sempre pronto

**Desvantagens:**
- âš ï¸ Requer hardware extra
- âš ï¸ Menos flexÃ­vel
- âš ï¸ Mais demorado para resetar

## ğŸ”§ ConfiguraÃ§Ã£o do Ambiente de Teste

### Checklist de SeguranÃ§a

#### Antes de ComeÃ§ar

- [ ] **Backups**: Fazer backup de dados importantes
- [ ] **Isolamento**: VM/Container/MÃ¡quina isolada configurada
- [ ] **Snapshot**: Criar ponto de restauraÃ§Ã£o
- [ ] **Rede**: Configurar isolamento de rede (se necessÃ¡rio)
- [ ] **DocumentaÃ§Ã£o**: Ter documentaÃ§Ã£o acessÃ­vel

#### Durante os Testes

- [ ] **Monitoramento**: Observar comportamento do sistema
- [ ] **Logs**: Manter logs dos testes
- [ ] **Cautela**: NÃ£o abrir outros programas importantes
- [ ] **Tempo**: Definir limite de tempo para testes

#### ApÃ³s os Testes

- [ ] **Limpeza**: Remover arquivos de teste
- [ ] **AnÃ¡lise**: Documentar resultados
- [ ] **RestauraÃ§Ã£o**: Restaurar snapshot se necessÃ¡rio
- [ ] **AtualizaÃ§Ã£o**: Atualizar cÃ³digo se necessÃ¡rio

### ConfiguraÃ§Ã£o EspecÃ­fica por Plataforma

#### Windows VM

**Softwares Ãºteis:**
```
- Sysinternals Suite (Process Monitor, Process Explorer, TCPView)
- Wireshark (anÃ¡lise de rede)
- Python 3.8+
- Visual Studio Code
- 7-Zip
```

**ConfiguraÃ§Ãµes recomendadas:**
```powershell
# Desabilitar Windows Defender temporariamente (para testes)
Set-MpPreference -DisableRealtimeMonitoring $true

# Habilitar execuÃ§Ã£o de scripts Python
Set-ExecutionPolicy RemoteSigned

# Criar diretÃ³rio de teste
mkdir C:\MalwareTest
cd C:\MalwareTest
```

#### Linux VM

**DistribuiÃ§Ã£o recomendada:** Ubuntu 22.04 LTS

**InstalaÃ§Ã£o de ferramentas:**
```bash
# Atualizar sistema
sudo apt update && sudo apt upgrade -y

# Instalar Python e ferramentas
sudo apt install -y python3 python3-pip python3-venv
sudo apt install -y git vim curl wget

# Ferramentas de monitoramento
sudo apt install -y htop iotop nethogs wireshark

# Criar diretÃ³rio de teste
mkdir ~/malware-test
cd ~/malware-test
```

## ğŸ“Š Monitoramento Durante Testes

### Windows

**Process Monitor (Procmon):**
```
1. Baixar Procmon (Sysinternals)
2. Executar como administrador
3. Filter > Filter... 
4. Adicionar: "Process Name is python.exe"
5. Observar operaÃ§Ãµes de arquivo/registro
```

**TCPView:**
```
- Monitora conexÃµes de rede em tempo real
- Identifica processos que fazem conexÃµes
- Ãštil para keylogger com e-mail
```

### Linux

**strace:**
```bash
# Rastrear chamadas de sistema
strace -f -e trace=file python3 ransomware.py
```

**tcpdump:**
```bash
# Capturar trÃ¡fego de rede
sudo tcpdump -i any -w capture.pcap
```

**inotify:**
```bash
# Monitorar mudanÃ§as em arquivos
inotifywait -m -r /path/to/watch
```

## ğŸ§ª CenÃ¡rios de Teste

### CenÃ¡rio 1: Teste BÃ¡sico de Ransomware

**Objetivo:** Verificar funcionamento bÃ¡sico

**Passos:**
1. Criar snapshot "Pre-Ransomware"
2. Criar 5 arquivos de teste diversos
3. Executar `ransomware.py`
4. Verificar arquivos criptografados
5. Executar `decryptor.py`
6. Verificar recuperaÃ§Ã£o
7. Documentar resultados

**CritÃ©rios de sucesso:**
- âœ… Arquivos foram criptografados
- âœ… NÃ£o Ã© possÃ­vel abrir arquivos criptografados
- âœ… Descriptografia recuperou dados originais
- âœ… Nenhum erro crÃ­tico

### CenÃ¡rio 2: Teste de Keylogger BÃ¡sico

**Objetivo:** Validar captura de teclas

**Passos:**
1. Executar `keylogger.py`
2. Digitar texto em diferentes aplicaÃ§Ãµes:
   - Notepad
   - Navegador
   - Terminal
3. Parar keylogger (ESC)
4. Examinar `keylog.txt`
5. Validar captura correta

**CritÃ©rios de sucesso:**
- âœ… Teclas foram capturadas corretamente
- âœ… Teclas especiais foram registradas
- âœ… RelatÃ³rio gerado corretamente

### CenÃ¡rio 3: Teste de EvasÃ£o (AvanÃ§ado)

**Objetivo:** Testar detecÃ§Ã£o por antivÃ­rus

**Passos:**
1. Instalar antivÃ­rus de teste (ex: Windows Defender)
2. Executar scripts
3. Verificar detecÃ§Ã£o
4. Documentar resultados

**Nota:** Scripts educacionais podem ser detectados como malware real!

## ğŸ”„ RestauraÃ§Ã£o do Ambiente

### VirtualBox

```
1. VM > Close > Power Off
2. Snapshots > Selecionar snapshot
3. Restore Snapshot
4. Start VM
```

### Windows Sandbox

```
Simplesmente feche o Sandbox
PrÃ³xima abertura serÃ¡ ambiente limpo
```

### Docker

```bash
# Container Ã© descartado com --rm
docker run -it --rm malware-test

# Para limpar imagens
docker system prune -a
```

## ğŸ“ Boas PrÃ¡ticas

### Durante Desenvolvimento

1. **Commits Frequentes**: Git commits apÃ³s cada mudanÃ§a
2. **Testes Incrementais**: Testar cada funcionalidade isoladamente
3. **DocumentaÃ§Ã£o**: Anotar comportamentos observados
4. **Versionamento**: Manter histÃ³rico de mudanÃ§as

### Durante Testes

1. **Um Teste por Vez**: NÃ£o misturar testes
2. **Ambiente Limpo**: Restaurar entre testes
3. **Registro**: Logs de tudo que acontece
4. **Tempo Limite**: NÃ£o deixar executando indefinidamente

### ApÃ³s Testes

1. **Limpeza**: Remover arquivos de teste
2. **AnÃ¡lise**: Revisar logs e resultados
3. **DocumentaÃ§Ã£o**: Atualizar README se necessÃ¡rio
4. **Compartilhamento**: Contribuir melhorias

## ğŸš¨ Lidando com Acidentes

### Se Executou Fora do Ambiente de Teste

**Ransomware:**
```
1. PARE o script imediatamente (Ctrl+C)
2. Desconecte da rede
3. Identifique arquivos afetados
4. Use decryptor.py com a chave gerada
5. Restaure de backup se necessÃ¡rio
```

**Keylogger:**
```
1. PARE o script (ESC ou Ctrl+C)
2. Delete keylog.txt
3. Mude senhas que possam ter sido capturadas
4. Scan com antivÃ­rus
```

### PrevenÃ§Ã£o

- âœ… **SEMPRE** use ambiente isolado
- âœ… **NUNCA** execute em mÃ¡quina de produÃ§Ã£o
- âœ… Mantenha backups atualizados
- âœ… Teste em VM primeiro

## ğŸ“š Recursos Adicionais

### Tutoriais de VirtualizaÃ§Ã£o

- **VirtualBox**: https://www.virtualbox.org/manual/
- **VMware**: https://docs.vmware.com/
- **Docker**: https://docs.docker.com/

### Ferramentas de AnÃ¡lise

- **Sysinternals**: https://docs.microsoft.com/sysinternals/
- **Wireshark**: https://www.wireshark.org/docs/
- **REMnux**: https://remnux.org/ (DistribuiÃ§Ã£o para anÃ¡lise de malware)

### Ambientes Prontos

- **Flare VM**: https://github.com/mandiant/flare-vm
- **REMnux**: https://remnux.org/
- **Security Onion**: https://securityonionsolutions.com/

## âœ… Checklist Final

Antes de comeÃ§ar seus testes:

- [ ] Ambiente isolado configurado
- [ ] Backup/Snapshot criado
- [ ] DependÃªncias instaladas
- [ ] DocumentaÃ§Ã£o lida
- [ ] Ferramentas de monitoramento prontas
- [ ] Plano de teste definido
- [ ] Tempo reservado
- [ ] Sistema atualizado

---

**ğŸ”’ SeguranÃ§a em primeiro lugar! Teste responsavelmente!**

**Desenvolvido para o Desafio DIO - CiberseguranÃ§a**
